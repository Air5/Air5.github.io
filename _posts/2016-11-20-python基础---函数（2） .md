---
layout: post
title:  python基础---函数（2） 
date: 2016-11-20 
tags: python基础---函数（2） 
---


对于函数的参数，远没你想的那么简单


1、实参与形参

先来看一段代码

#coding=utf-8
def func(name):
    print '{t} is good'.format(t=name)

func('white')



•形参就是函数定义时小括号里的参数，在函数被调用之前，他们的值都是不确定的，name显然就是函数func的形参


•实参，就是函数调用时提供的真实的值，字符串white是实参，如果你担心和形参的概念搞混，不妨就叫它“具体的值”




形参的值，取决于实参，相当于形参被实参替代了。在函数被调用时，你可以传入不同的实参，在函数内部，我们使用形参做各种操作。


2、对形参的改变会影响实参么


 

看一段代码
#coding=utf-8
def change_age(age):
    print u'改变前的内存地址{id}'.format(id=id(age))
    print 'before change {age}'.format(age=age)
    age = 20
    print u'改变后的内存地址{id}'.format(id=id(age))
    print 'after change {age}'.format(age=age)

age_ex = 22

change_age(age_ex)
print u'内存地址{id}'.format(id=id(age_ex))
print age_ex
 


在这段代码里，age_ex被赋值为22，函数change_age时，age_ex作为实参被传入函数中，而函数内部，对形参age做了修改，age被修改为20，现在的问题是
，函数执行结束后，print age_ex的输出内容是什么，函数内对age的改变会不会影响到age_ex呢？

答案是不会，age是是age_ex的一个复制品，在改变age的值之前，他们的内存地址都是相同的，但是改变后，age的内存地址发生了变化。字符串，数字，
元组都是不可变的，即只能用新的值去覆盖旧的值。对于这几类数据做实参，你不必担心函数内的修改会影响到函数外的东西。




3、来一个影响的

 

但如果实参是list这类可变类型数据做参数呢，看代码
def change_lst(lst):
    lst.append(3)
    lst.append('change')
    print id(lst)

lst = []
change_lst(lst)
print lst
print id(lst)

 

理解这段代码，你首先要弄清楚一件事情，形参的名字是lst，实参的名字也是lst，但他们不会因为名字相同而产生任何的关联关系。

执行这段代码，最终lst是一个空的列表呢还是包含了两个元素的列表呢？答案是后者，函数向lst中添加了两个元素，如果你感到奇怪，上面的
那个change_age函数里改变age对外面的实参不起作用，为何change_lst函数里对形参的改变会影响到外面的实参lst呢？

这里的玄机在于，lst是列表，而列表是可变序列,通过使用内置函数id()，你可以清楚的看到，在使用append方法后，lst变量在内存的地址没有
发生变化，变化的是它指向的内存区域里的内容。




 4、剧情好似翻转

 

如果你已经有些感觉了，那么现在来一个小小的剧情翻转，让你明白，你理解的还不够深刻
def change_lst(lst):
    lst = [1,2]
    print id(lst)

lst = []
change_lst(lst)
print lst
print id(lst)


这段代码的执行结果会下你一跳，最后打印出的lst居然是空列表，而不是你以为的[1,2] ,不是说好了么，列表是可变序列，怎么在这段代码里又不行了呢？

问题出在，函数内部重新对lst进行了赋值操作，这样一来，就改变了形参lst的内存地址，而在函数外部，lst的内存地址没有发生变化，因此，函数内对形参
lst的任何修改都不会影响到函数外的实参。

每一个变量都指向了一块内存地址，上一个例子里，对lst进行的修改在函数外部是起作用的，那是因为调用append方法并不会改变形参lst的内存地址
，而这个内存地址和外面的实参lst所指向的内存地址是一样的，这样一来，函数内对形参的改变，对函数外的实参也是起作用的，因为他们指向同一个
内存地址，而这块地址的内容因为调用append方法而发生了改变。

感觉到很乱是吧，乱就多思考，总结下来无非两条

•字符串，数字，元组类型的不可变类型数据被作为参数传入到函数中以后，对他们的修改，不会影响到外部的变量


•list,dict等可变类型数据被作为参数传入到函数中以后，对他们内容的修改，是会在函数外产生影响的，究其根本，你传入的是这个对象的内存地址

